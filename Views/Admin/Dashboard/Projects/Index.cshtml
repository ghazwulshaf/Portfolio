@model List<Project>
@{
    Layout = "_LayoutDashboard";
    ViewData["Title"] = "Projects";
}

<div class="px-12 py-4">
    <section class="card flex gap-2">
        <a asp-action="Add" asp-controller="DashboardProjects" class="flex justify-center items-center px-2 bg-gray-700 text-white rounded-sm"><i data-feather="plus"></i></a>
        <div class="relative w-3/4">
            <input type="search" id="project-search" class="input" style="padding-left: 2rem;" oninput="Search()" placeholder="Search...">
            <div class="absolute left-0 top-0 bottom-0 flex ps-2 items-center">
                <i data-feather="search" class="text-gray-500 h-4"></i>
            </div>
        </div>

        <select id="project-type" class="input w-1/4" onchange="Search()">
            <option value="All">All</option>
            @foreach (var Item in ViewBag.ProjectTypes)
            {
            <option value="@Item.Name">@Item.Name</option>
            }
        </select>
    </section>

    <section class="card mt-4">
        <table class="w-full table-fixed border-y border-gray-500">
            <thead class="border-b border-gray-500 [&_th>div]:px-1 [&_th>div]:py-2">
                <th class="w-1/12">
                    <div>No</div>
                </th>
                <th class="w-1/12">
                    <div>Thumbnail</div>
                </th>
                <th class="w-3/12 text-start">
                    <div>Title</div>
                </th>
                <th class="w-2/12">
                    <div>Project</div>
                </th>
                <th class="w-2/12">
                    <div>Tags</div>
                </th>
                <th class="w-1/12">
                    <div>Create Date</div>
                </th>
                <th class="w-1/12">
                    <div>Update Date</div>
                </th>
                <th class="w-1/12">
                    <div>Action</div>
                </th>
            </thead>
            <tbody id="table-items">
                <partial name="./_Projects.cshtml" for="@Model"></partial>
            </tbody>
        </table>
    </section>
</div>

@section Scripts
{
<script>
    function Search() {
        var data = {
            projectType: $('#project-type').val(),
            search: $('#project-search').val()
        };
        
        $.ajax({
            url: '@Url.Action("Search", "DashboardProjects")',
            data: data,
            success: (response) => {
                $('#table-items').html(response);
                feather.replace();
            }
        })
    }
</script>
<script>
    function DeleteProject(event) {
        var userConfirmed = confirm('Are you sure you want to delete this projects?');
        if (!userConfirmed) {
            event.preventDefault();
        }

        return userConfirmed;
    }
</script>
}