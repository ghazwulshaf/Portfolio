@model Project
@{
    Project Project = Model;
    Project NextProject = ViewBag.NextProject ?? new Project();
    List<Project> ProjectsSameType = ViewBag.ProjectsSameType;

    ViewData["Title"] = Project.Title;
}

<div class="px-48 pt-24 pb-36">

    <div id="detail-header" class="mb-8">
        <a asp-action="Index" asp-controller="Projects" class="flex items-center gap-1">
            <i data-feather="arrow-left" class="inline h-4"></i>
            <span>Back to Projects</span>
        </a>
    </div>

    <div id="detail-project">

        <div id="project-header" class="grid grid-cols-2 gap-8">

            <div id="project-header-left" class="order-first">

                <div id="project-title">
                    <h1>@Project.Title</h1>
                </div>

                <div id="project-type">
                    <span class="text-gray-500">@Project.Type</span>
                </div>

                <div id="project-description" class="text-justify mt-4">@Project.Description</div>

                <div id="project-tags" class="mt-4 flex flex-row items-center gap-2">
                @foreach (var Tag in Project.Tags)
                {
                    <span class="tag">@Tag.Name</span>
                }
                </div>

                <div id="project-actions" class="mt-12">
                    <a asp-area="" asp-page="" class="button button-dark"><i data-feather="play" class="inline h-4"></i> Live Demo</a>
                    <a asp-area="" asp-page="" class="ms-2 button button-light"><i data-feather="github" class="inline h-4"></i> View Code</a>
                </div>
            </div>

            <div id="project-header-right">
                <div id="project-image" class="relative w-full aspect-[16/9] bg-cover bg-center rounded-md bg-gray-200"
                    style="background-image: url('@Project.Thumbnail');"
                ></div>
            </div>
        </div>

        <div class="mt-12 flex gap-4">

            <div id="project-content" class="w-3/4"></div>

            <div id="project-side" class="w-1/4 ps-4 border-s *:mt-4">
            @if (ViewBag.NextProject != null)
            {
                <div class="first:mt-0">
                    <div>Next Project</div>
                    <div class="grid grid-cols-1 gap-3 text-sm mt-2">
                        <div class="grid grid-cols-3 gap-2">
                            <div class="relative aspect-video bg-cover bg-center bg-gray-200"
                                style="background-image: url('@NextProject.Thumbnail');"
                            ></div>
                            <a asp-action="Details" asp-controller="Projects" asp-route-id="@NextProject.Id" class="col-span-2">@NextProject.Title</a>
                        </div>
                    </div>
                </div>
            }

                <div class="first:mt-0">
                    <div>@Project.Type</div>
                    <div class="grid grid-cols-1 gap-3 text-sm mt-2">
                    @foreach (var ProjectSameType in ProjectsSameType)
                    {
                        <div class="grid grid-cols-3 gap-2">
                            <div class="relative aspect-video bg-cover bg-center bg-gray-200"
                                style="background-image: url('@ProjectSameType.Thumbnail');"
                            ></div>
                            <a asp-action="Details" asp-controller="Projects" asp-route-id="@ProjectSameType.Id" class="col-span-2">@ProjectSameType.Title</a>
                        </div>
                    }
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts
{
    <script>
        $(document).ready(() => {
            fetch('@Project.ContentFile')
                .then(response => response.text())
                .then(data => $('#project-content').html(data))
                .catch(error => console.error('Error content: ', error));
        })
    </script>
}